<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Your Info</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="col-md-6">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Your Info</h4>
        </div>
        <div class="card-body">
            <form id="infoForm" action="submit_info.php" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="businessName">Business Name</label>
                    <input type="text" name="businessName" class="form-control" id="businessName" placeholder="Business Name">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" name="address" class="form-control" id="address" placeholder="Address">
                </div>
                <div class="form-group">
                    <label for="contactNumber">Contact number</label>
                    <input type="text" name="contactNumber" class="form-control" id="contactNumber" placeholder="Contact Number">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" name="email" class="form-control" id="email" placeholder="Email">
                </div>
                <div class="form-group">
                    <label for="website">Website</label>
                    <input type="text" name="website" class="form-control" id="website" placeholder="Website">
                </div>
                <div class="form-group">
                    <label for="logo">Add logo</label>
                    <input type="file" name="fileType" class="form-control-file" id="logo" accept=".png, .jpg, .gif" aria-describedby="logoHelp">
                    <small id="logoHelp" class="form-text text-muted">PNG, JPG, GIF up to 10MB</small>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" id="cancelUpdate" class="btn btn-secondary">Cancel</button>
            </form>
            <div id="infoDisplay">
                <h5><Your></Your> Information</h5>
                <img id="displayLogo" src="" alt="Logo" style="max-width: 200px; max-height: 200px;">
                <p id="displayBusinessName"></p>
                <p id="displayAddress"></p>
                <p id="displayContactNumber"></p>
                <p id="displayEmail"></p>
                <p id="displayWebsite"></p>

                <button id="updateInfoButton" class="btn btn-secondary mt-3">Update Info</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Function to fetch and display initial data
        fetchAndDisplayData();

        // Listen to form submission
        document.getElementById('infoForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const formData = new FormData(this);
            axios.post('submit_info.php', formData)
                .then(function(response) {
                    const data = response.data;
                    displaySubmittedInfo(data);
                })
                .catch(function(error) {
                    console.error('Error submitting form:', error);
                });
        });

    function fetchAndDisplayData() {
        axios.get('submit_info.php')
            .then(function(response) {
                const data = response.data;
                displaySubmittedInfo(data);
            })
            .catch(function(error) {
                console.error('Error fetching data:', error);
            });
    }

    function displaySubmittedInfo(data) {

        document.getElementById('displayBusinessName').textContent = 'Business Name: ' + data.businessName;
        document.getElementById('displayAddress').textContent = 'Address: ' + data.address;
        document.getElementById('displayContactNumber').textContent = 'Contact Number: ' + data.contactNumber;
        document.getElementById('displayEmail').textContent = 'Email: ' + data.email;
        document.getElementById('displayWebsite').textContent = 'Website: ' + data.website;
        if (data.fileType) {
            document.getElementById('displayLogo').src = data.fileType;
            document.getElementById('displayLogo').style.display = 'block';
        } else {
            document.getElementById('displayLogo').style.display = 'none';
        }

        document.getElementById('infoForm').style.display = 'none';
        document.getElementById('infoDisplay').style.display = 'block';
    }
</script>
</body>
</html>
