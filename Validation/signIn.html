<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewpiont" content="width=device-wdth, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Karla&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="signin.css">
    
</head>
<body>
    <div>
        <img class="logo" src="star_sparkle_stars_sparkles_icon_new.png"  alt="logo">

    </div>
    <div class="CompanyName">ProBook</div>
    <div class="container">
        <form id="loginform">
            <h2>Sign in</h2>

            <label for="email" >Email</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" required>
            <span id="emailError" class="error-message"></span>
            
            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Enter your password">
            <span id="passwordError" class="error-message"></span>

            <button type="submit">Submit</button>
        </form>
        <span id="serverError" class="error-message"></span>
        <span id="serverSuccess" class="success-message"></span>



    </div>
    <script>
        document.getElementById('loginform').addEventListener('submit',function(event){
            event.preventDefault();
            let serverError= document.getElementById('serverError');
            let serverSuccess= document.getElementById('serverSuccess');

            serverError.textContent='';
            serverSuccess.textContent='';

            const formData = new FormData(this);
            
            // axios post request 
            axios.post('signIn_validation.php',formData)
            .then(function(response){
                if(response.data.success) {
                    serverSuccess.textContent=response.data.message;
                    setTimeout(()=>{
                       window.location.href ="../Dashboard/dashboard.php";
                    },3000);
            } else {
                //display error message to the user
                serverError.textContent=response.data.message;
            }
               
            })
            .catch(function(error){
                //log any error 
                console.error(error);
                //display error to the message to the user 
                serverError.textContent= 'There ws an error submitting the form';
                });
     });
    </script>
</body>
</html>