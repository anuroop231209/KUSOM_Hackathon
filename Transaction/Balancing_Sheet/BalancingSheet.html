<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balance Sheet</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const creditForm = document.getElementById('credit-form');
            const depositForm = document.getElementById('deposit-form');
            
            creditForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // Handle form submission for credits
                const formData = new FormData(creditForm);
                axios.post('uploadnewcredit.php', formData)
                    .then(response => {
                        // Refresh recent credits and balance sheet
                        loadRecentCredits();
                        loadBalanceSheet();
                    })
                    .catch(error => console.error(error));
            });

            depositForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // Handle form submission for deposits
                const formData = new FormData(depositForm);
                axios.post('uploadnewdeposit.php', formData)
                    .then(response => {
                        // Refresh recent deposits and balance sheet
                        loadRecentDeposits();
                        loadBalanceSheet();
                    })
                    .catch(error => console.error(error));
            });

            function loadRecentCredits() {
                axios.get('getRecentCredits.php')
                    .then(response => {
                        const recentCreditsBody = document.getElementById('recent-credits-body');
                        recentCreditsBody.innerHTML = '';
                        response.data.forEach(credit => {
                            const row = document.createElement('tr');
                            row.innerHTML = `<td>${credit.description}</td><td>${credit.amount}</td>`;
                            recentCreditsBody.appendChild(row);
                        });
                    })
                    .catch(error => console.error(error));
            }

            function loadRecentDeposits() {
                axios.get('getRecentDeposits.php')
                    .then(response => {
                        const recentDepositsBody = document.getElementById('recent-deposits-body');
                        recentDepositsBody.innerHTML = '';
                        response.data.forEach(deposit => {
                            const row = document.createElement('tr');
                            row.innerHTML = `<td>${deposit.description}</td><td>${deposit.amount}</td>`;
                            recentDepositsBody.appendChild(row);
                        });
                    })
                    .catch(error => console.error(error));
            }

            function loadBalanceSheet() {
                axios.get('getBalanceSheet.php')
                    .then(response => {
                        document.getElementById('total-credits').textContent = response.data.totalCredits;
                        document.getElementById('total-deposits').textContent = response.data.totalDeposits;
                        document.getElementById('net-profit-loss').textContent = response.data.netProfitLoss;
                    })
                    .catch(error => console.error(error));
            }

            loadRecentCredits();
            loadRecentDeposits();
            loadBalanceSheet();
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="new-entries">
            <div class="new-credits">
                <h2>New Credit</h2>
                <form id="credit-form" method="post">
                    <div class="form-group">
                        <label for="from">Account</label>
                        <select id="from" name="from">
                            <option value="">Choose an Account</option>
                            <!-- Populate with your account options-->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" id="date" name="date" value="2024-06-09">
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <input type="text" id="description" name="description">
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount</label>
                        <input type="number" id="amount" name="amount">
                    </div>
                    <button type="submit">Submit</button>
                </form>
            </div>
            <div class="new-deposits">
                <h2>New Deposit</h2>
                <form id="deposit-form" method="post">
                    <div class="form-group">
                        <label for="from-deposit">Account</label>
                        <select id="from-deposit" name="from">
                            <option value="">Choose an Account</option>
                            <!-- Populate with your account options-->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="date-deposit">Date</label>
                        <input type="date" id="date-deposit" name="date" value="2024-06-09">
                    </div>
                    <div class="form-group">
                        <label for="description-deposit">Description</label>
                        <input type="text" id="description-deposit" name="description">
                    </div>
                    <div class="form-group">
                        <label for="amount-deposit">Amount</label>
                        <input type="number" id="amount-deposit" name="amount">
                    </div>
                    <button type="submit">Submit</button>
                </form>
            </div>
        </div>
        <div class="recent-entries">
            <div class="recent-credits">
                <h2>Recent Credits</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody id="recent-credits-body">
                        <!-- Recent credits will be populated here-->
                    </tbody>
                </table>
            </div>
            <div class="recent-deposits">
                <h2>Recent Deposits</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody id="recent-deposits-body">
                        <!-- Recent deposits will be populated here-->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="balance-sheet">
            <h2>Balance Sheet</h2>
            <table>
                <thead>
                    <tr>
                        <th>Total Credits</th>
                        <th>Total Deposits</th>
                        <th>Net Profit/Loss</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td id="total-credits">0</td>
                        <td id="total-deposits">0</td>
                        <td id="net-profit-loss">0</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
